window.JingleChart=JChart={version:"0.1",animationOptions:{linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0==a?0:1==a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*2*Math.PI/c))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*a)*Math.sin((1*a-b)*2*Math.PI/c)+1},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(2==(a/=.5))return 1;if(c||(c=1*.3*1.5),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return 1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*2*Math.PI/c):.5*d*Math.pow(2,-10*(a-=1))*Math.sin((1*a-b)*2*Math.PI/c)+1},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-JChart.animationOptions.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?1*7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*JChart.animationOptions.easeInBounce(2*a):.5*JChart.animationOptions.easeOutBounce(2*a-1)+.5}},requestAnimFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isEqual:function(a,b,c){return c=void 0==c?10:c,a.toFixed(c)===b.toFixed(c)},capValue:function(a,b,c){return this.isNumber(b)&&a>b?b:this.isNumber(c)&&c>a?c:a},getDecimalPlaces:function(a){return 0!=a%1?a.toString().split(".")[1].length:0},mergeObj:function(a,b){for(var c in b)a[c]=b[c]},clone:function(a){var b;if("object"==typeof a)if(null===a)b=null;else if(a instanceof Array){b=[];for(var c=0,d=a.length;d>c;c++)b.push(this.clone(a[c]))}else{b={};for(var e in a)b[e]=this.clone(a[e])}else b=a;return b},each:function(a,b,c){for(var d=0,e=a.length;e>d;d++){var f=b.call(c,a[d],d,a);if(f!==!0&&f===!1)break}},tmpl:function(){function a(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[c]=b[c]||a(document.getElementById(c).innerHTML);return d?e(d):e}var b={};return a}()},function(a){function b(b,c){function d(a,b,c){var d=e(a,b);d&&g.trigger(c,[g.chartData.datasets[d[3]].data[d[2]],d[2],d[3]])}function e(b,c){var d;return a.each(f,function(a){return b>=a[0]&&b<=a[1]&&c>=a[3]&&c<=a[2]?(d=a,!1):void 0}),d}a.Scale.apply(this);var f=[];this._type_="bar";var g=this;this.data=b,this.chartData=null,this.config={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,datasetGesture:!0,datasetOffsetNumber:12},this.bindEvents=function(){this.on("_tap",function(a,b){d(a,b,"tap.bar")}),this.on("_longTap",function(a,b){d(a,b,"longTap.bar")}),this.config.datasetGesture&&this.bindDataGestureEvent()},this.init=function(a){this.chartData=this.config.datasetGesture&&this.data.labels.length>g.config.datasetOffsetNumber?this.sliceData(this.data,0,this.data.labels.length,this.config.datasetOffsetNumber):this.data,this.initScale(),a?(this.drawScale(),this.drawBars(1)):this.doAnim(this.drawScale,this.drawBars)},this.redraw=function(a){this.chartData=a,this.clear(),this.initScale(),this.drawScale(),this.drawBars(1)},this.drawBars=function(b){1==b&&(f=[]);var c=g.ctx,d=g.config,e=g.scaleData;c.lineWidth=d.barStrokeWidth,a.each(g.chartData.datasets,function(h,i){c.fillStyle=h.fillColor,c.strokeStyle=h.strokeColor,a.each(h.data,function(a,h){var j=e.x+d.barValueSpacing+e.xHop*h+e.barWidth*i+d.barDatasetSpacing*i+d.barStrokeWidth*i,k=e.y,l=j+e.barWidth,m=e.y-b*g.calculateOffset(a,e.yScaleValue,e.yHop)+d.barStrokeWidth/2;c.beginPath(),c.moveTo(j,k),c.lineTo(j,m),c.lineTo(l,m),c.lineTo(l,k),d.barShowStroke&&c.stroke(),c.closePath(),c.fill(),1==b&&f.push([j,l,k,m,h,i])})})},c&&this.initial(c)}a.Bar=b}(JChart),function(a){var b=function(){this.events={},this.initial=function(b){"string"==typeof b?this.config.id=b:a.mergeObj(this.config,b),this.ctx=document.getElementById(this.config.id).getContext("2d");var c=this.ctx.canvas;this.width=c.width,this.height=c.height,window.devicePixelRatio&&(c.style.width=this.width+"px",c.style.height=this.height+"px",c.height=this.height*window.devicePixelRatio,c.width=this.width*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)),this.init(),this.bindTouchEvents(),this.bindEvents()},this.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},this.refresh=function(b){b&&a.mergeObj(this.config,b),this.init()},this.load=function(b,c){this.data=b,c&&a.mergeObj(this.config,c),this.clear(),this.init(!0)},this.doAnim=function(b,c,d){function e(){j+=h,f(),1>=j?a.requestAnimFrame.call(window,e):(d&&d(),k.trigger("animationComplete"))}function f(){k.clear();var d=g.animation?a.capValue(i(j),null,0):1;g.scaleOverlay?(c(d),b()):(b(),c(d))}var g=this.config,h=g.animation?1/a.capValue(g.animationSteps,Number.MAX_VALUE,1):1,i=a.animationOptions[g.animationEasing],j=g.animation?0:1,k=this;"function"!=typeof b&&(b=function(){}),a.requestAnimFrame.call(window,e)},this.on=function(a,b){this.events[a]=b},this.trigger=function(a,b){var c=this.events[a];return c?c.apply(this,b):null},this.bindTouchEvents=function(){function a(a){i=Date.now(),a=a.touches?a.touches[0]:a,j=i-(k.last||i),g&&clearTimeout(g),k.x1=a.offsetX,k.y1=a.offsetY,j>0&&250>=j&&(k.isDoubleTap=!0),k.last=i,h=setTimeout(d,l)}function b(a){a=a.touches?a.touches[0]:a,k.x2=a.offsetX,k.y2=a.offsetY,Math.abs(k.x1-k.x2)>15&&(a.preventDefault(),f())}function c(){e(),"last"in k&&(m.trigger("_tap",[k.x1,k.y1]),m.trigger("tap",[k.x1,k.y1]),k.isDoubleTap?(f(),m.trigger("_doubleTap",[k.x1,k.y1]),m.trigger("doubleTap",[k.x1,k.y1])):g=setTimeout(function(){g=null,m.trigger("_singleTap",[k.x1,k.y1]),m.trigger("singleTap",[k.x1,k.y1]),k={}},250))}function d(){h=null,k.last&&(m.trigger("_longTap",[k.x1,k.y1]),m.trigger("longTap",[k.x1,k.y1]),k={})}function e(){h&&clearTimeout(h),h=null}function f(){g&&clearTimeout(g),h&&clearTimeout(h),g=h=null,k={}}var g,h,i,j,k={},l=750,m=this;this.ctx.canvas.addEventListener("mousedown",a),this.ctx.canvas.addEventListener("mousemove",b),this.ctx.canvas.addEventListener("mouseup",c),this.ctx.canvas.addEventListener("touchcancel",f)}};a.Chart=b}(JChart),function(a){function b(b,c){function d(a,b){var c=e(a,b);c&&g.trigger("tap.point",[g.chartData.datasets[c[3]].data[c[2]],c[2],c[3]])}function e(b,c){var d,e=g.config.pointClickBounds;return a.each(f,function(a){return b>=a[0]-e&&b<=a[0]+e&&c>=a[1]-e&&c<=a[1]+e?(d=a,!1):void 0}),d}a.Scale.apply(this);var f=[];this._type_="line",this.data=b,this.chartData=null;var g=this;this.config={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,pointClickBounds:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:30,animationEasing:"easeOutQuart",onAnimationComplete:null,datasetGesture:!0,datasetOffsetNumber:12},this.bindEvents=function(){this.on("_tap",d),this.config.datasetGesture&&this.bindDataGestureEvent()},this.init=function(a){this.chartData=this.config.datasetGesture&&this.data.labels.length>g.config.datasetOffsetNumber?this.sliceData(this.data,0,this.data.labels.length,this.config.datasetOffsetNumber):this.data,g.initScale(),a?(this.drawScale(),this.drawLines(1)):this.doAnim(this.drawScale,this.drawLines)},this.redraw=function(a){this.chartData=a,this.clear(),this.initScale(),this.drawScale(),this.drawLines(1)},this.drawLines=function(b){function c(a,c){return j.y-b*g.calculateOffset(i[a].data[c],j.yScaleValue,j.yHop)}function d(a){return j.x+j.xHop*a}1==b&&(f=[]);var e=g.ctx,h=g.config,i=g.chartData.datasets,j=g.scaleData;a.each(i,function(i,k){e.strokeStyle=i.strokeColor,e.lineWidth=h.datasetStrokeWidth,e.beginPath(),e.moveTo(j.x,j.y-b*g.calculateOffset(i.data[0],j.yScaleValue,j.yHop)),a.each(i.data,function(a,g){var i=d(g),j=c(k,g);h.bezierCurve?e.bezierCurveTo(d(g-.5),c(k,g-1),d(g-.5),c(k,g),i,j):e.lineTo(i,j),1==b&&f.push([i,j,g,k])}),e.stroke(),h.datasetFill?(e.lineTo(j.x+j.xHop*(i.data.length-1),j.y),e.lineTo(j.x,j.y),e.closePath(),e.fillStyle=i.fillColor,e.fill()):e.closePath(),h.pointDot&&(e.fillStyle=i.pointColor,e.strokeStyle=i.pointStrokeColor,e.lineWidth=h.pointDotStrokeWidth,a.each(i.data,function(a,c){e.beginPath(),e.arc(j.x+j.xHop*c,j.y-b*g.calculateOffset(a,j.yScaleValue,j.yHop),h.pointDotRadius,0,2*Math.PI,!0),e.fill(),e.stroke()}))})},c&&this.initial(c)}a.Line=b}(JChart),function(a){function b(b,c){function d(){var b=0;m=[],a.each(n.data,function(a,c){var d=b;b+=a.value/p*2*Math.PI;var e=b;m.push([d,e,a,c])})}function e(a){f(a,"rotate")}function f(b,c){n.clear();var d=1;n.config.animation&&(d=b),a.each(m,function(a){h(a,d,c)}),n.config.isDount&&n.config.dountText&&l()}function g(a,b,c){var d=a[0],e=a[1];return"rotate"==c?(d=d+q+r*b,e=e+q+r*b):(d=d*b+q,e=e*b+q),{start:d,end:e}}function h(a,b,c){var d=n.width/2,e=n.height/2,f=a[3];if(f==s){var h=(a[0]+a[1])/2+q;d+=Math.cos(h)*n.config.pullOutDistance,e+=Math.sin(h)*n.config.pullOutDistance}var j=g(a,b,c);i(d,e,o,j.start,j.end,n.data[f])}function i(a,b,c,d,e,f){var g=n.ctx;g.beginPath(),g.arc(a,b,c,d,e,!1),n.config.isDount?g.arc(a,b,c*n.config.dountRadiusPercent,e,d,!0):g.lineTo(a,b),g.closePath(),g.fillStyle=f.color,g.fill(),n.config.segmentShowStroke&&(g.lineWidth=n.config.segmentStrokeWidth,g.strokeStyle=n.config.segmentStrokeColor,g.stroke())}function j(a,b,c){var d=n.config.clickType,e=k(a,b);if(e)if("tap.pie"==c){if(!n.trigger(c,[e[2],e[3]]))return;"rotate"==d?n.rotate(e[3]):"pullOut"==d&&n.toggleSegment(e[3])}else n.trigger(d,[e[2],e[3]])}function k(b,c){var d,e=b-n.width/2,f=c-n.height/2,g=Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(f),2)),h=o>=g;if(h&&n.config.isDount&&(h=g>=o*n.config.dountRadiusPercent),h){var i=Math.atan2(f,e)-q;return 0>i&&(i=2*Math.PI+i),i>2*Math.PI&&(i-=2*Math.PI),a.each(m,function(a){return i>=a[0]&&i<a[1]?(d=a,!1):void 0}),d}}function l(){var a=n.ctx;a.textBaseline=n.config.dountTextBaseline,a.textAlign=n.config.dountTextAlign,a.font=n.config.dountTextFont,a.fillStyle=n.config.dountTextColor,a.fillText(n.config.dountText,n.width/2,n.height/2,o*n.config.dountRadiusPercent)}a.Chart.apply(this);var m,n=this;this.data=b;var o,p=0,q=0,r=0,s=-1;this.config={id:"",segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,startAngle:-Math.PI/2,rotateAngle:Math.PI/2,pullOutDistance:10,clickType:"pullOut",animation:!0,animationSteps:20,animationEasing:"linear",isDount:!1,dountRadiusPercent:.4,dountText:"",dountTextFont:"bold 30px Arial",dountTextColor:"#e74c3c",dountTextBaseline:"middle",dountTextAlign:"center"},this.bindEvents=function(){this.on("_tap",function(a,b){j(a,b,"tap.pie")}),this.on("_longTap",function(a,b){j(a,b,"longTap.pie")}),this.on("tap.pie",function(){return!0})},this.toggleSegment=function(a){a==s?this.pushIn():this.pullOut(a)},this.pushIn=function(){s=-1,f(1),this.trigger("pushIn")},this.pullOut=function(a){s!=a&&(s=a,f(1),this.trigger("pullOut",[a,n.data[a]]))},this.rotate=function(b){var c=(m[b][0]+m[b][1])/2+q,d=n.config.rotateAngle-c;a.isEqual(d,0)||(this.pushIn(),r=d,this.doAnim(null,e,function(){q+=r,n.trigger("rotate",[b,n.data[b]])}))},this.setDountText=function(a){n.config.dountText=a,f(1)},this.init=function(b){o=Math.min(n.height/2,n.width/2)-10,a.each(n.data,function(a){p+=a.value}),d(),b?f(1):this.doAnim(null,f),q=n.config.startAngle},this.load=function(a){this.data=a,this.init(!0)},c&&this.initial(c)}a.Pie=b}(JChart),function(a){function b(){a.Chart.apply(this);var b=this;this.scaleData={x:0,y:0,xHop:0,yHop:0,xLength:0,yHeight:0,yScaleValue:null,labelRotate:0,widestXLabel:0,barWidth:0},this.calculateDrawingSizes=function(){var c=b.height,d=1,e=0;b.ctx.font=b.config.scaleFontStyle+" "+b.config.scaleFontSize+"px "+b.config.scaleFontFamily,a.each(b.chartData.labels,function(a){var c=b.ctx.measureText(a).width;d=c>d?c:d}),b.width/b.chartData.labels.length<d?(e=45,b.width/b.chartData.labels.length<Math.cos(e)*d?(e=90,c-=d):c-=Math.sin(e)*d):c-=b.config.scaleFontSize,c-=5,c-=b.config.scaleFontSize,this.scaleData.yHeight=c,this.scaleData.labelRotate=e,this.scaleData.widestXLabel=d},this.getValueBounds=function(){var c=Number.MIN_VALUE,d=Number.MAX_VALUE;a.each(b.chartData.datasets,function(b){a.each(b.data,function(a){a>c&&(c=a),d>a&&(d=a)})});var e=this.scaleData.yHeight,f=b.config.scaleFontSize,g=Math.floor(e/(.66*f)),h=Math.floor(.5*(e/f));return{maxValue:c,minValue:d,maxSteps:g,minSteps:h}},this.initScaleData=function(){var a,c=b.config,d=c.scaleShowLabels?c.scaleLabel:"";if(c.scaleOverride)a={steps:c.scaleSteps,stepValue:c.scaleStepWidth,graphMin:c.scaleStartValue,labels:[]},b.populateLabels(d,a.labels,a.steps,c.scaleStartValue,c.scaleStepWidth);else{var e=b.getValueBounds();a=b.calcScale(b.scaleData.yHeight,e.maxSteps,e.minSteps,e.maxValue,e.minValue,d)}this.scaleData.yScaleValue=a,this.scaleData.yHop=Math.floor(b.scaleData.yHeight/a.steps)},this.calcScale=function(a,c,d,e,f,g){function h(a){return Math.floor(Math.log(a)/Math.LN10)}var i,j,k,l,m,n,o;for(n=e-f,o=h(n),i=Math.floor(f/(1*Math.pow(10,o)))*Math.pow(10,o),j=Math.ceil(e/(1*Math.pow(10,o)))*Math.pow(10,o),k=j-i,l=Math.pow(10,o),m=Math.round(k/l);d>m||m>c;)d>m?(l/=2,m=Math.round(k/l)):(l*=2,m=Math.round(k/l));var p=[];return b.populateLabels(g,p,m,i,l),{steps:m,stepValue:l,graphMin:i,labels:p}},this.calculateXAxisSize=function(){var c,d,e,f,g=b.config,h=b.scaleData,i=1;if(g.scaleShowLabels&&(b.ctx.font=g.scaleFontStyle+" "+g.scaleFontSize+"px "+g.scaleFontFamily,a.each(h.yScaleValue.labels,function(a){var c=b.ctx.measureText(a).width;i=c>i?c:i}),i+=10),c=b.width-i-h.widestXLabel,"bar"==b._type_){d=Math.floor(c/b.chartData.labels.length);var j=b.chartData.datasets.length;h.barWidth=(d-2*g.scaleGridLineWidth-2*g.barValueSpacing-(g.barDatasetSpacing*j-1)-(g.barStrokeWidth/2*j-1))/j}else d=Math.floor(c/(b.chartData.labels.length-1));e=b.width-h.widestXLabel/2-c,f=h.yHeight+g.scaleFontSize/2,h.x=e,h.y=f,h.xWidth=c,h.xHop=d},this.drawScale=function(){function c(a,b){d.lineWidth=e.scaleGridLineWidth,d.strokeStyle=e.scaleGridLineColor,d.lineTo(a,b)}var d=b.ctx,e=b.config,f=b.scaleData;d.lineWidth=e.scaleLineWidth,d.strokeStyle=e.scaleLineColor,d.beginPath(),d.moveTo(b.width-f.widestXLabel/2+5,f.y),d.lineTo(b.width-f.widestXLabel/2-f.xWidth-5,f.y),d.stroke(),f.labelRotate>0?(d.save(),d.textAlign="right"):d.textAlign="center",d.fillStyle=e.scaleFontColor,a.each(b.chartData.labels,function(a,g){d.save();var h=f.x+g*f.xHop,i=f.y+e.scaleFontSize;"bar"==b._type_&&(h+=f.xHop/2),f.labelRotate>0?(d.translate(h,i),d.rotate(-(f.labelRotate*(Math.PI/180))),d.fillText(a,0,0),d.restore()):d.fillText(a,h,i+3),d.beginPath(),"bar"==this._type_?(d.moveTo(f.x+(g+1)*f.xHop,f.y+3),c(f.x+(g+1)*f.xHop,5)):(d.moveTo(f.x+g*f.xHop,f.y+3),e.scaleShowGridLines&&g>0?c(f.x+g*f.xHop,5):d.lineTo(f.x+g*f.xHop,f.y+3)),d.stroke()}),d.lineWidth=e.scaleLineWidth,d.strokeStyle=e.scaleLineColor,d.beginPath(),d.moveTo(f.x,f.y+5),d.lineTo(f.x,5),d.stroke(),d.textAlign="right",d.textBaseline="middle";for(var g=0;g<f.yScaleValue.steps;g++)d.beginPath(),d.moveTo(f.x-3,f.y-(g+1)*f.yHop),e.scaleShowGridLines?c(f.x+f.xWidth+5,f.y-(g+1)*f.yHop):d.lineTo(f.x-.5,f.y-(g+1)*f.yHop),d.stroke(),e.scaleShowLabels&&d.fillText(f.yScaleValue.labels[g],f.x-8,f.y-(g+1)*f.yHop)},this.calcScale=function(a,b,c,d,e,f){function g(a){return Math.floor(Math.log(a)/Math.LN10)}var h,i,j,k,l,m,n;for(m=d-e,n=g(m),h=Math.floor(e/(1*Math.pow(10,n)))*Math.pow(10,n),i=Math.ceil(d/(1*Math.pow(10,n)))*Math.pow(10,n),j=i-h,k=Math.pow(10,n),l=Math.round(j/k);c>l||l>b;)c>l?(k/=2,l=Math.round(j/k)):(k*=2,l=Math.round(j/k));var o=[];return this.populateLabels(f,o,l,h,k),{steps:l,stepValue:k,graphMin:h,labels:o}},this.populateLabels=function(b,c,d,e,f){if(b)for(var g=1;d+1>g;g++)c.push(a.tmpl(b,{value:(e+f*g).toFixed(a.getDecimalPlaces(f))}))},this.calculateOffset=function(b,c,d){var e=c.steps*c.stepValue,f=b-c.graphMin,g=a.capValue(f/e,1,0);return d*c.steps*g},this.initScale=function(){b.calculateDrawingSizes(),b.initScaleData(),b.calculateXAxisSize()},this.sliceData=function(b,c,d,e){var f=a.clone(b),g=c,h=c+e;return h>d&&(g=d-e,h=d),f.labels=f.labels.slice(g,h),a.each(f.datasets,function(a){a.data=a.data.slice(g,h)}),f},this.bindDataGestureEvent=function(){function a(a){f={x:a.pageX,y:a.pageY},e=0,g=!0}function c(a){if(g&&b.config.datasetGesture){var c=a.pageX;if(a.pageY,e=c-f.x,e%b.scaleData.xHop<b.scaleData.xHop/10){var d=h-Math.floor(e/b.scaleData.xHop);if(d+j>k)return;if(0>d)return;i=d,b.redraw(b.sliceData(b.data,d,k,j))}}}function d(){g=!1,h=i}var e,f,g,h=0,i=0,j=this.config.datasetOffsetNumber,k=data.labels.length;this.ctx.canvas.addEventListener("mousedown",a),this.ctx.canvas.addEventListener("mousemove",c),this.ctx.canvas.addEventListener("mouseup",d)}}a.Scale=b}(JChart);