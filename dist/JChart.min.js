window.JingleChart=JChart={version:"0.1",animationOptions:{linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0==a?0:1==a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*2*Math.PI/c))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*a)*Math.sin((1*a-b)*2*Math.PI/c)+1},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(2==(a/=.5))return 1;if(c||(c=1*.3*1.5),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return 1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*2*Math.PI/c):.5*d*Math.pow(2,-10*(a-=1))*Math.sin((1*a-b)*2*Math.PI/c)+1},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-JChart.animationOptions.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?1*7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*JChart.animationOptions.easeInBounce(2*a):.5*JChart.animationOptions.easeOutBounce(2*a-1)+.5}},requestAnimFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isEqual:function(a,b,c){return c=void 0==c?10:c,a.toFixed(c)===b.toFixed(c)},capValue:function(a,b,c){return this.isNumber(b)&&a>b?b:this.isNumber(c)&&c>a?c:a},getDecimalPlaces:function(a){return 0!=a%1?a.toString().split(".")[1].length:0},mergeObj:function(a,b){for(var c in b)a[c]=b[c]},clone:function(a){var b;if("object"==typeof a)if(null===a)b=null;else if(a instanceof Array){b=[];for(var c=0,d=a.length;d>c;c++)b.push(this.clone(a[c]))}else{b={};for(var e in a)b[e]=this.clone(a[e])}else b=a;return b},each:function(a,b,c){for(var d=0,e=a.length;e>d;d++){var f=b.call(c,a[d],d,a);if(f!==!0&&f===!1)break}},getOffset:function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(self.pageYOffset||e.scrollTop||d.scrollTop)-f,i=b.left+(self.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{top:h,left:i}},hex2Rgb:function(a,b){var c,d,e;if(/rgb/.test(a)){var f=a.match(/\d+/g);c=parseInt(f[0]),d=parseInt(f[1]),e=parseInt(f[2])}else{if(!/#/.test(a))return a;var g=a.length;7===g?(c=parseInt(a.slice(1,3),16),d=parseInt(a.slice(3,5),16),e=parseInt(a.slice(5),16)):4===g&&(c=parseInt(a.charAt(1)+val.charAt(1),16),d=parseInt(a.charAt(2)+val.charAt(2),16),e=parseInt(a.charAt(3)+val.charAt(3),16))}return"rgb("+c+","+d+","+e+b?b:"1)"},tmpl:function(){function a(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[c]=b[c]||a(document.getElementById(c).innerHTML);return d?e(d):e}var b={};return a}()},function(a){function b(b,c){function d(a,b,c){var d=e(a,b);d&&g.trigger(c,[g.chartData.datasets[d[5]].data[d[4]],d[4],d[5]])}function e(b,c){var d;return a.each(f,function(a){return b>=a[0]&&b<=a[1]&&c>=a[3]&&c<=a[2]?(d=a,!1):void 0}),d}a.Scale.apply(this);var f=[];this._type_="bar";var g=this;this.data=b,this.chartData=null,a.mergeObj(this.config,{showBarBorder:!0,barBorderWidth:2,barSpacing:1,barSetSpacing:5,datasetGesture:!1,datasetShowNumber:12}),this.bindEvents=function(){this.on("_tap",function(a,b){d(a,b,"tap.bar")}),this.on("_longTap",function(a,b){d(a,b,"longTap.bar")}),this.config.datasetGesture&&this.bindDataGestureEvent()},this.init=function(a){this.chartData=this.config.datasetGesture&&this.data.labels.length>g.config.datasetShowNumber?this.sliceData(this.data,0,this.data.labels.length,this.config.datasetShowNumber):this.data,this.initScale(!0),a?(this.drawScale(),this.drawBars(1)):this.doAnim(this.drawScale,this.drawBars)},this.redraw=function(a){this.chartData=a,this.clear(),this.initScale(!0),this.drawScale(),this.drawBars(1)},this.drawBars=function(b){b>=1&&(f=[]);var c=g.ctx,d=g.config,e=g.scaleData;c.lineWidth=d.barBorderWidth,a.each(g.chartData.datasets,function(h,i){h.borderColor?(c.fillStyle=h.color,c.strokeStyle=h.borderColor):(c.fillStyle=a.hex2Rgb(h.color,.6),c.strokeStyle=h.color),a.each(h.data,function(a,h){var j=e.x+d.barSetSpacing+e.xHop*h+e.barWidth*i+d.barSpacing*i+d.barBorderWidth*i,k=e.y,l=j+e.barWidth,m=e.y-b*g.calculateOffset(a,e.yScaleValue,e.yHop)+d.barBorderWidth/2;c.beginPath(),c.moveTo(j,k),c.lineTo(j,m),c.lineTo(l,m),c.lineTo(l,k),d.showBarBorder&&c.stroke(),c.closePath(),c.fill(),b>=1&&f.push([j,l,k,m,h,i])})})},c&&this.initial(c)}a.Bar=b}(JChart),function(a){var b=function(){this.config={animation:!0,animationSteps:60,animationEasing:"easeOutBounce"},this.events={},this.initial=function(b){"string"==typeof b?this.config.id=b:a.mergeObj(this.config,b),this.ctx=document.getElementById(this.config.id).getContext("2d");var c=this.ctx.canvas;this.width=c.width,this.height=c.height,window.devicePixelRatio&&(c.style.width=this.width+"px",c.style.height=this.height+"px",c.height=this.height*window.devicePixelRatio,c.width=this.width*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)),this.init(),this.bindTouchEvents(),this.bindEvents()},this.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},this.refresh=function(b){b&&a.mergeObj(this.config,b),this.init()},this.load=function(b,c){this.data=b,c&&a.mergeObj(this.config,c),this.clear(),this.init(!0)},this.doAnim=function(b,c,d){function e(){k+=i,f(),1>=k?a.requestAnimFrame.call(window,e):(d&&d.call(h),h.trigger("animationComplete"))}function f(){h.clear();var d=g.animation?a.capValue(j(k),null,0):1;b.call(h),c.call(h,d)}var g=this.config,h=this,i=g.animation?1/a.capValue(g.animationSteps,Number.MAX_VALUE,1):1,j=a.animationOptions[g.animationEasing],k=g.animation?0:1,h=this;"function"!=typeof b&&(b=function(){}),a.requestAnimFrame.call(window,e)},this.on=function(a,b){this.events[a]=b},this.trigger=function(a,b){var c=this.events[a];return c?c.apply(this,b):null},this.bindTouchEvents=function(){function b(a){j=Date.now(),a=a.touches?a.touches[0]:a,k=j-(l.last||j),h&&clearTimeout(h),l.x1=a.pageX-n.left,l.y1=a.pageY-n.top,k>0&&250>=k&&(l.isDoubleTap=!0),l.last=j,i=setTimeout(e,m)}function c(a){var b=a.touches?a.touches[0]:a;l.x2=b.pageX-n.left,l.y2=b.pageY-n.top,Math.abs(l.x1-l.x2)>15&&(a.preventDefault(),g())}function d(){f(),"last"in l&&(t.trigger("_tap",[l.x1,l.y1]),t.trigger("tap",[l.x1,l.y1]),l.isDoubleTap?(g(),t.trigger("_doubleTap",[l.x1,l.y1]),t.trigger("doubleTap",[l.x1,l.y1])):h=setTimeout(function(){h=null,t.trigger("_singleTap",[l.x1,l.y1]),t.trigger("singleTap",[l.x1,l.y1]),l={}},250))}function e(){i=null,l.last&&(t.trigger("_longTap",[l.x1,l.y1]),t.trigger("longTap",[l.x1,l.y1]),l={})}function f(){i&&clearTimeout(i),i=null}function g(){h&&clearTimeout(h),i&&clearTimeout(i),h=i=null,l={}}var h,i,j,k,l={},m=750,n=a.getOffset(this.ctx.canvas),o="ontouchstart"in window,p=o?"touchstart":"mousedown",q=o?"touchmove":"mousemove",r=o?"touchend":"mouseup",s=o?"touchcancel":"mouseup",t=this;this.ctx.canvas.addEventListener(p,b),this.ctx.canvas.addEventListener(q,c),this.ctx.canvas.addEventListener(r,d),this.ctx.canvas.addEventListener(s,g)}};a.Chart=b}(JChart),function(a){function b(b,c){function d(a,b){var c=e(a,b);c&&g.trigger("tap.point",[g.chartData.datasets[c[3]].data[c[2]],c[2],c[3]])}function e(b,c){var d,e=g.config.pointClickBounds;return a.each(f,function(a){return b>=a[0]-e&&b<=a[0]+e&&c>=a[1]-e&&c<=a[1]+e?(d=a,!1):void 0}),d}a.Scale.apply(this);var f=[];this._type_="line",this.data=b,this.chartData=null;var g=this;a.mergeObj(this.config,{smooth:!1,showPoint:!0,pointRadius:4,pointBorderWidth:2,pointClickBounds:20,lineWidth:2,fill:!0,datasetGesture:!1,datasetShowNumber:12}),this.bindEvents=function(){this.on("_tap",d),this.config.datasetGesture&&this.bindDataGestureEvent()},this.init=function(a){this.chartData=this.config.datasetGesture&&this.data.labels.length>g.config.datasetShowNumber?this.sliceData(this.data,0,this.data.labels.length,this.config.datasetShowNumber):this.data,g.initScale(!0),a?(this.drawScale(),this.drawLines(1)):this.doAnim(this.drawScale,this.drawLines)},this.redraw=function(a){this.chartData=a,this.clear(),this.initScale(!0),this.drawScale(),this.drawLines(1)},this.drawLines=function(b){function c(a,c){return j.y-b*g.calculateOffset(i[a].data[c],j.yScaleValue,j.yHop)}function d(a){return j.x+j.xHop*a}b>=1&&(f=[]);var e=g.ctx,h=g.config,i=g.chartData.datasets,j=g.scaleData;a.each(i,function(i,k){e.strokeStyle=i.color,e.lineWidth=h.lineWidth,e.beginPath(),e.moveTo(j.x,j.y-b*g.calculateOffset(i.data[0],j.yScaleValue,j.yHop)),a.each(i.data,function(a,g){var i=d(g),j=c(k,g);h.smooth?e.bezierCurveTo(d(g-.5),c(k,g-1),d(g-.5),c(k,g),i,j):e.lineTo(i,j),b>=1&&f.push([i,j,g,k])}),e.stroke(),h.fill?(e.lineTo(j.x+j.xHop*(i.data.length-1),j.y),e.lineTo(j.x,j.y),e.closePath(),e.fillStyle=i.fillColor?i.fillColor:a.hex2Rgb(i.color,.6),e.fill()):e.closePath(),h.showPoint&&(e.fillStyle=i.pointColor||"#fff",e.strokeStyle=i.pointBorderColor||i.color,e.lineWidth=h.pointBorderWidth,a.each(i.data,function(a,c){e.beginPath(),e.arc(j.x+j.xHop*c,j.y-b*g.calculateOffset(a,j.yScaleValue,j.yHop),h.pointRadius,0,2*Math.PI,!0),e.fill(),e.stroke()}))})},c&&this.initial(c)}a.Line=b}(JChart),function(a){function b(b,c){function d(){var b=0;m=[],a.each(n.data,function(a,c){var d=b;b+=a.value/p*2*Math.PI;var e=b;m.push([d,e,a,c])})}function e(a){f(a,"rotate")}function f(b,c){n.clear();var d=1;n.config.animation&&(d=b),a.each(m,function(a){h(a,d,c)}),n.config.isDount&&n.config.dountText&&l()}function g(a,b,c){var d=a[0],e=a[1];return"rotate"==c?(d=d+q+r*b,e=e+q+r*b):(d=d*b+q,e=e*b+q),{start:d,end:e}}function h(a,b,c){var d=n.width/2,e=n.height/2,f=a[3];if(f==s){var h=(a[0]+a[1])/2+q;d+=Math.cos(h)*n.config.pullOutDistance,e+=Math.sin(h)*n.config.pullOutDistance}var j=g(a,b,c);i(d,e,o,j.start,j.end,n.data[f])}function i(a,b,c,d,e,f){var g=n.ctx;g.beginPath(),g.arc(a,b,c,d,e,!1),n.config.isDount?g.arc(a,b,c*n.config.dountRadiusPercent,e,d,!0):g.lineTo(a,b),g.closePath(),g.fillStyle=f.color,g.fill(),n.config.segmentShowStroke&&(g.lineWidth=n.config.segmentStrokeWidth,g.strokeStyle=n.config.segmentStrokeColor,g.stroke())}function j(a,b,c){var d=n.config.clickType,e=k(a,b);if(e)if("tap.pie"==c){if(!n.trigger(c,[e[2],e[3]]))return;"rotate"==d?n.rotate(e[3]):"pullOut"==d&&n.toggleSegment(e[3])}else n.trigger(d,[e[2],e[3]])}function k(b,c){var d,e=b-n.width/2,f=c-n.height/2,g=Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(f),2)),h=o>=g;if(h&&n.config.isDount&&(h=g>=o*n.config.dountRadiusPercent),h){var i=Math.atan2(f,e)-q;return 0>i&&(i=2*Math.PI+i),i>2*Math.PI&&(i-=2*Math.PI),a.each(m,function(a){return i>=a[0]&&i<a[1]?(d=a,!1):void 0}),d}}function l(){var a=n.ctx;a.textBaseline=n.config.dountTextBaseline,a.textAlign=n.config.dountTextAlign,a.font=n.config.dountTextFont,a.fillStyle=n.config.dountTextColor,a.fillText(n.config.dountText,n.width/2,n.height/2,o*n.config.dountRadiusPercent)}a.Chart.apply(this);var m,n=this;this.data=b;var o,p=0,q=0,r=0,s=-1;a.mergeObj(this.config,{id:"",segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,startAngle:-Math.PI/2,rotateAngle:Math.PI/2,pullOutDistance:10,clickType:"pullOut",isDount:!1,dountRadiusPercent:.4,dountText:"",dountTextFont:"bold 30px Arial",dountTextColor:"#e74c3c",dountTextBaseline:"middle",dountTextAlign:"center"}),this.bindEvents=function(){this.on("_tap",function(a,b){j(a,b,"tap.pie")}),this.on("_longTap",function(a,b){j(a,b,"longTap.pie")}),this.on("tap.pie",function(){return!0})},this.toggleSegment=function(a){a==s?this.pushIn():this.pullOut(a)},this.pushIn=function(){s=-1,f(1),this.trigger("pushIn")},this.pullOut=function(a){s!=a&&(s=a,f(1),this.trigger("pullOut",[a,n.data[a]]))},this.rotate=function(b){var c=(m[b][0]+m[b][1])/2+q,d=n.config.rotateAngle-c;a.isEqual(d,0)||(this.pushIn(),r=d,this.doAnim(null,e,function(){q+=r,n.trigger("rotate",[b,n.data[b]])}))},this.setDountText=function(a){n.config.dountText=a,f(1)},this.init=function(b){o=Math.min(n.height/2,n.width/2)-10,p=0,s=-1,a.each(n.data,function(a){p+=a.value}),d(),b?f(1):this.doAnim(null,f),q=n.config.startAngle},this.load=function(a){this.data=a,this.init(!0)},c&&this.initial(c)}a.Pie=b}(JChart),function(a){function b(b,c){function d(){}a.Scale.apply(this),this.data=this.chartData=b,a.mergeObj(this.config,{showScaleLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,showSegmentBorder:!0,segmentBorderColor:"#fff",segmentBorderWidth:2,animateRotate:!0,animateScale:!1}),this.bindEvents=function(){this.on("_tap",d)},this.init=function(){this.initScale(),this.doAnim(this.drawScale,this.drawAllSegments)},this.calcDrawingSizes=function(){var a=Math.min(this.width,this.height)/2,b=this.config,c=2*b.scaleFontSize;a-=Math.max(.5*b.scaleFontSize,.5*b.scaleLineWidth),b.showScaleLabelBackdrop&&(c+=2*b.scaleBackdropPaddingY,a-=1.5*b.scaleBackdropPaddingY),this.scaleData.yHeight=a,this.scaleData.yLabelHeight=c},this.drawScale=function(){for(var a=this.ctx,b=this.config,c=this.scaleData,d=0;d<c.yScaleValue.step;d++)if(b.showGridLine&&(a.beginPath(),a.arc(this.width/2,this.height/2,c.yHop*(d+1),0,2*Math.PI,!0),a.strokeStyle=b.gridLineColor,a.lineWidth=b.gridLineWidth,a.stroke()),b.showScaleLabel){a.textAlign="center",a.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily;var e=c.yScaleValue.labels[d];if(b.showScaleLabelBackdrop){var f=a.measureText(e).width;a.fillStyle=b.scaleBackdropColor,a.beginPath(),a.rect(Math.round(this.width/2-f/2-b.scaleBackdropPaddingX),Math.round(this.height/2-c.yHop*(d+1)-.5*b.scaleFontSize-b.scaleBackdropPaddingY),Math.round(f+2*b.scaleBackdropPaddingX),Math.round(b.scaleFontSize+2*b.scaleBackdropPaddingY)),a.fill()}a.textBaseline="middle",a.fillStyle=b.scaleFontColor,a.fillText(e,this.width/2,this.height/2-c.yHop*(d+1))}},this.drawAllSegments=function(a){var c=-Math.PI/2,d=2*Math.PI/this.data.length,e=1,f=1,g=this.scaleData,h=this.config,i=this.ctx;h.animation&&(h.animateScale&&(e=a),h.animateRotate&&(f=a));for(var j=0;j<this.data.length;j++)i.beginPath(),i.arc(this.width/2,this.height/2,e*this.calculateOffset(b[j].value,g.yScaleValue,g.yHop),c,c+f*d,!1),i.lineTo(this.width/2,this.height/2),i.closePath(),i.fillStyle=this.data[j].color,i.fill(),h.showSegmentBorder&&(i.strokeStyle=h.segmentBorderColor,i.lineWidth=h.segmentBorderWidth,i.stroke()),c+=f*d},this.getValueBounds=function(a){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.length;d++)a[d].value>b&&(b=a[d].value),a[d].value<c&&(c=a[d].value);var e=this.scaleData.yHeight,f=this.scaleData.yLabelHeight,g=Math.floor(e/(.66*f)),h=Math.floor(.5*(e/f));return{maxValue:b,minValue:c,maxSteps:g,minSteps:h}},c&&this.initial(c)}a.Polar=b}(JChart),function(a){function b(b,c){function d(){}a.Scale.apply(this);var e=this;this.data=this.chartData=b,a.mergeObj(this.config,{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,graphShape:"circle",showAngleLine:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,labelFontFamily:"'Arial'",labelFontStyle:"normal",labelFontSize:12,labelFontColor:"#666",showPoint:!0,pointRadius:3,pointBorderWidth:1,pointClickBounds:20,lineWidth:2,fill:!0,showScaleLabel:!1,gridLineColor:"rgb(0,0,0,.5)"}),this.bindEvents=function(){this.on("_tap",d)},this.init=function(){this.initScale(),this.doAnim(this.drawScale,this.drawAllDataPoints)},this.calcDrawingSizes=function(){var b=Math.min(this.width,this.height)/2,c=this.config,d=2*c.scaleFontSize,f=0;a.each(e.data.labels,function(a){this.ctx.font=c.labelFontStyle+" "+c.labelFontSize+"px "+c.labelFontFamily;var b=this.ctx.measureText(a).width;b>f&&(f=b)},this),b-=Math.max(f,1.5*(c.labelFontSize/2)),b-=c.labelFontSize,b=a.capValue(b,null,0),this.scaleData.yHeight=b,this.scaleData.yLabelHeight=d},this.drawScale=function(){var a=this.ctx,b=this.config,c=this.scaleData,d=this.data.labels.length,e=2*Math.PI/d;if(a.save(),a.translate(this.width/2,this.height/2),b.showAngleLine){a.strokeStyle=b.angleLineColor,a.lineWidth=b.angleLineWidth;for(var f=c.yHeight-c.yHeight%c.yHop,g=0;d>g;g++)a.rotate(e),a.beginPath(),a.moveTo(0,0),a.lineTo(0,-f),a.stroke()}for(var h=0;h<c.yScaleValue.step;h++){if(a.beginPath(),b.showGridLine){if(a.strokeStyle=b.gridLineColor,a.lineWidth=b.gridLineWidth,"diamond"==b.graphShape){a.moveTo(0,-c.yHop*(h+1));for(var i=0;d>i;i++)a.rotate(e),a.lineTo(0,-c.yHop*(h+1))}else a.arc(0,0,c.yHop*(h+1),0,2*Math.PI,!0);a.closePath(),a.stroke()}if(b.showScaleLabel){if(a.textAlign="center",a.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily,a.textBaseline="middle",b.scaleShowLabelBackdrop){var j=a.measureText(c.yScaleValue.labels[h]).width;a.fillStyle=b.scaleBackdropColor,a.beginPath(),a.rect(Math.round(-j/2-b.scaleBackdropPaddingX),Math.round(-c.yHop*(h+1)-.5*b.scaleFontSize-b.scaleBackdropPaddingY),Math.round(j+2*b.scaleBackdropPaddingX),Math.round(b.scaleFontSize+2*b.scaleBackdropPaddingY)),a.fill()}a.fillStyle=b.scaleFontColor,a.fillText(c.yScaleValue.labels[h],0,-c.yHop*(h+1))}}for(var k=0;d>k;k++){a.font=b.labelFontStyle+" "+b.labelFontSize+"px "+b.labelFontFamily,a.fillStyle=b.labelFontColor;var l=Math.sin(e*k)*(c.yHeight+b.labelFontSize),m=Math.cos(e*k)*(c.yHeight+b.labelFontSize);a.textAlign=e*k==Math.PI||0==e*k?"center":e*k>Math.PI?"right":"left",a.textBaseline="middle",a.fillText(this.data.labels[k],l,-m)}a.restore()},this.drawAllDataPoints=function(a){var c=b.datasets[0].data.length,d=2*Math.PI/c,e=this.data.datasets,f=this.scaleData,g=this.ctx,h=this.config;g.save(),g.translate(this.width/2,this.height/2);for(var i=0;i<this.data.datasets.length;i++){g.beginPath(),g.moveTo(0,a*-1*this.calculateOffset(e[i].data[0],f.yScaleValue,f.yHop));for(var j=1;j<b.datasets[i].data.length;j++)g.rotate(d),g.lineTo(0,a*-1*this.calculateOffset(e[i].data[j],f.yScaleValue,f.yHop));if(g.closePath(),g.fillStyle=e[i].fillColor,g.strokeStyle=e[i].strokeColor,g.lineWidth=h.lineWidth,g.fill(),g.stroke(),h.showPoint){g.fillStyle=e[i].pointColor,g.strokeStyle=e[i].pointStrokeColor,g.lineWidth=h.pointBorderWidth;for(var k=0;k<e[i].data.length;k++)g.rotate(d),g.beginPath(),g.arc(0,a*-1*this.calculateOffset(b.datasets[i].data[k],f.yScaleValue,f.yHop),h.pointRadius,2*Math.PI,!1),g.fill(),g.stroke()}g.rotate(d)}g.restore()},c&&this.initial(c)}a.Radar=b}(JChart),function(a){function b(){a.Chart.apply(this),a.mergeObj(this.config,{scale:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,showScaleLabel:!0,scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",showGridLine:!0,gridLineColor:"rgba(0,0,0,.05)",gridLineWidth:1}),this.scaleData={x:0,y:0,xHop:0,yHop:0,xLength:0,yHeight:0,yLabelHeight:0,yScaleValue:null,labelRotate:0,widestXLabel:0,barWidth:0},this.calcDrawingSizes=function(){var b=this.height,c=1,d=0;this.ctx.font=this.config.scaleFontStyle+" "+this.config.scaleFontSize+"px "+this.config.scaleFontFamily,a.each(this.chartData.labels,function(a){var b=this.ctx.measureText(a).width;c=b>c?b:c},this),this.width/this.chartData.labels.length<c?(d=45,this.width/this.chartData.labels.length<Math.cos(d)*c?(d=90,b-=c):b-=Math.sin(d)*c):b-=this.config.scaleFontSize,b-=5,b-=this.config.scaleFontSize,this.scaleData.yHeight=b,this.scaleData.yLabelHeight=this.config.scaleFontSize,this.scaleData.labelRotate=d,this.scaleData.widestXLabel=c},this.getValueBounds=function(b){var c=Number.MIN_VALUE,d=Number.MAX_VALUE;a.each(b,function(b){a.each(b.data,function(a){a>c&&(c=a),d>a&&(d=a)})});var e=this.scaleData.yHeight,f=this.scaleData.yLabelHeight,g=Math.floor(e/(.66*f)),h=Math.floor(.5*(e/f));return{maxValue:c,minValue:d,maxSteps:g,minSteps:h}},this.calcYAxis=function(){var a=this.config,b=a.scale;if(b)b.start=b.start||0,b.labels=this.populateLabels(b.step,b.start,b.stepValue);else{var c=this.getValueBounds(this.chartData.datasets?this.chartData.datasets:this.chartData);b=this.calcScale(this.scaleData.yHeight,c.maxSteps,c.minSteps,c.maxValue,c.minValue)}this.scaleData.yScaleValue=b,this.scaleData.yHop=Math.floor(this.scaleData.yHeight/b.step)},this.calcXAxis=function(){var b,c,d,e,f=this.config,g=this.scaleData,h=1;if(f.showScaleLabel&&(this.ctx.font=f.scaleFontStyle+" "+f.scaleFontSize+"px "+f.scaleFontFamily,a.each(g.yScaleValue.labels,function(a){var b=this.ctx.measureText(a).width;h=b>h?b:h},this),h+=10),b=this.width-h-g.widestXLabel,"bar"==this._type_){c=Math.floor(b/this.chartData.labels.length);var i=this.chartData.datasets.length;g.barWidth=(c-2*f.gridLineWidth-2*f.barSetSpacing-(f.barSpacing*i-1)-(f.barBorderWidth/2*i-1))/i}else c=Math.floor(b/(this.chartData.labels.length-1));d=this.width-g.widestXLabel/2-b,e=g.yHeight+f.scaleFontSize/2,g.x=d,g.y=e,g.xWidth=b,g.xHop=c},this.drawScale=function(){function b(a,b){c.lineWidth=d.gridLineWidth,c.strokeStyle=d.gridLineColor,c.lineTo(a,b)}var c=this.ctx,d=this.config,e=this.scaleData;c.lineWidth=d.scaleLineWidth,c.strokeStyle=d.scaleLineColor,c.beginPath(),c.moveTo(this.width-e.widestXLabel/2+5,e.y),c.lineTo(this.width-e.widestXLabel/2-e.xWidth-5,e.y),c.stroke(),e.labelRotate>0?(c.save(),c.textAlign="right"):c.textAlign="center",c.fillStyle=d.scaleFontColor,a.each(this.chartData.labels,function(a,f){c.save();var g=e.x+f*e.xHop,h=e.y+d.scaleFontSize;"bar"==this._type_&&(g+=e.xHop/2),e.labelRotate>0?(c.translate(g,h),c.rotate(-(e.labelRotate*(Math.PI/180))),c.fillText(a,0,0),c.restore()):c.fillText(a,g,h+3),c.beginPath(),"bar"==this._type_?(c.moveTo(e.x+(f+1)*e.xHop,e.y+3),b(e.x+(f+1)*e.xHop,5)):(c.moveTo(e.x+f*e.xHop,e.y+3),d.showGridLine&&f>0?b(e.x+f*e.xHop,5):c.lineTo(e.x+f*e.xHop,e.y+3)),c.stroke()},this),c.lineWidth=d.scaleLineWidth,c.strokeStyle=d.scaleLineColor,c.beginPath(),c.moveTo(e.x,e.y+5),c.lineTo(e.x,5),c.stroke(),c.textAlign="right",c.textBaseline="middle";for(var f=0;f<e.yScaleValue.step;f++)c.beginPath(),c.moveTo(e.x-3,e.y-(f+1)*e.yHop),d.showGridLine?b(e.x+e.xWidth+5,e.y-(f+1)*e.yHop):c.lineTo(e.x-.5,e.y-(f+1)*e.yHop),c.stroke(),d.showScaleLabel&&c.fillText(e.yScaleValue.labels[f],e.x-8,e.y-(f+1)*e.yHop)},this.initScale=function(a){this.calcDrawingSizes(),this.calcYAxis(),a&&this.calcXAxis()},this.calcScale=function(a,b,c,d,e){function f(a){return Math.floor(Math.log(a)/Math.LN10)}var g,h,i,j,k,l,m;for(l=d-e,m=f(l),g=Math.floor(e/(1*Math.pow(10,m)))*Math.pow(10,m),h=Math.ceil(d/(1*Math.pow(10,m)))*Math.pow(10,m),i=h-g,j=Math.pow(10,m),k=Math.round(i/j);c>k||k>b;)c>k?(j/=2,k=Math.round(i/j)):(j*=2,k=Math.round(i/j));var n=this.populateLabels(k,g,j);return{step:k,stepValue:j,start:g,labels:n}},this.populateLabels=function(b,c,d){for(var e=[],f=1;b+1>f;f++)if(this.config.showScaleLabel){var g=(c+d*f).toFixed(a.getDecimalPlaces(d)),h=this.trigger("renderScaleLabel",[g]);e.push(h?h:g)}else e.push("");return e},this.calculateOffset=function(b,c,d){var e=c.step*c.stepValue,f=b-c.start,g=a.capValue(f/e,1,0);return d*c.step*g},this.sliceData=function(b,c,d,e){var f=a.clone(b),g=c,h=c+e;return h>d&&(g=d-e,h=d),f.labels=f.labels.slice(g,h),a.each(f.datasets,function(a){a.data=a.data.slice(g,h)}),f},this.bindDataGestureEvent=function(){function a(a){a=a.touches?a.touches[0]:a,e={x:a.pageX,y:a.pageY},d=0,f=!0}function b(a){if(f&&g.config.datasetGesture){a=a.touches?a.touches[0]:a;var b=a.pageX;if(a.pageY,d=b-e.x,Math.floor(d)%20<10){var c=g.data.labels.length,k=h-Math.floor(d/g.scaleData.xHop);if(k+j>c)return;if(0>k)return;i=k,setTimeout(function(){g.redraw(g.sliceData(g.data,k,c,j))},0)}}}function c(){f=!1,h=i}var d,e,f,g=this,h=0,i=0,j=this.config.datasetShowNumber,k="ontouchstart"in window,l=k?"touchstart":"mousedown",m=k?"touchmove":"mousemove",n=k?"touchend":"mouseup";this.ctx.canvas.addEventListener(l,a),this.ctx.canvas.addEventListener(m,b),this.ctx.canvas.addEventListener(n,c)}}a.Scale=b}(JChart);